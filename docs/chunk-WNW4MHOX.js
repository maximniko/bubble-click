import{a as g}from"./chunk-OIFQLSBG.js";import{a as H}from"./chunk-TY35OF7Y.js";import{a as F,f as h,g as G}from"./chunk-IFSWMRX4.js";import"./chunk-JIHTAVX4.js";import{a as D}from"./chunk-SG6BUMOX.js";import{h as _,i as O}from"./chunk-EGXIULMI.js";import{Ga as o,Ha as p,Ta as E,Wa as m,Wb as L,Xa as b,Yb as S,_a as T,cb as t,db as i,dc as y,ea as v,eb as r,gb as C,hb as I,jc as j,kb as w,mb as c,oa as s,ob as M,pa as u,rb as f,ub as B,vb as x}from"./chunk-NGIYV43Q.js";function R(l,a){if(l&1&&(t(0,"div",17),c(1),i()),l&2){let n,e=I();o(),M(" \u0411\u043B\u0438\u0436\u0430\u0439\u0448\u0438\u0439 \u0431\u043E\u043D\u0443\u0441 ",e.toLocalDate(e.depositToDate(e.nearestDeposit),(n=e.twa.getUserLanguageCode())!==null&&n!==void 0?n:"en")," ")}}var k=class l{constructor(a,n,e,d){this.coinsService=a;this.bankService=n;this.depositService=e;this.twa=d}depositSubscription;depositSum=0;nearestDeposit;ngOnInit(){this.depositSubscription=this.depositService.depositsSubject.subscribe(a=>{this.depositSum=a.reduce((e,d)=>(e+=d.sum,e),0);let n=Date.now();a.forEach(e=>{let d=h(e).getTime();d<n||(!this.nearestDeposit||h(this.nearestDeposit).getTime()>d)&&(this.nearestDeposit=e)})})}ngOnDestroy(){this.depositSubscription?.unsubscribe()}bankInfo(){this.twa.showPopup({title:"\u0417\u0430\u0447\u0435\u043C \u043D\u0443\u0436\u0435\u043D \u0411\u0430\u043D\u043A?",message:"\u0425\u0440\u0430\u043D\u0438\u0442\u0435 \u043C\u043E\u043D\u0435\u0442\u044B \u0432 \u0431\u0430\u043D\u043A\u0435! \u0417\u0430\u0449\u0438\u0442\u0438 \u0441\u0435\u0431\u044F \u043E\u0442 \u043D\u0435\u043F\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043D\u043D\u044B\u0445 \u0440\u0430\u0441\u0445\u043E\u0434\u043E\u0432!",buttons:[{type:"ok"}]})}depositInfo(){this.twa.showPopup({title:"\u0417\u0430\u0447\u0435\u043C \u043D\u0443\u0436\u0435\u043D \u0414\u0435\u043F\u043E\u0437\u0438\u0442?",message:"\u041F\u043E\u043B\u043E\u0436\u0438 \u043C\u043E\u043D\u0435\u0442\u044B \u043D\u0430 \u0434\u0435\u043F\u043E\u0437\u0438\u0442 \u0438 \u043F\u043E\u043B\u0443\u0447\u0438 \u0431\u043E\u043B\u044C\u0448\u0435 \u043F\u0440\u0438\u0431\u044B\u043B\u0438 \u043F\u043E \u043E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u0438 \u0441\u0440\u043E\u043A\u0430!",buttons:[{type:"ok"}]})}toLocalDate=F;symbols=g;routeCreator=D;depositToDate=h;static \u0275fac=function(n){return new(n||l)(p(j),p(H),p(G),p(y))};static \u0275cmp=v({type:l,selectors:[["balance-main"]],standalone:!0,features:[f],decls:47,vars:14,consts:[[1,"m-2"],[1,"tg-bg-secondary","p-2","rounded-2"],[1,"in-bank","mb-3"],[1,"h5","color-subtitle","jcb"],[1,"my-auto","mx-0"],[1,"p-2",3,"click"],[1,"bi"],[1,"input-group","input-group-lg","mb-3"],[1,"input-group-text"],["type","text","aria-label","\u0412 \u0431\u0430\u043D\u043A\u0435","disabled","","readonly","",1,"form-control",3,"value"],[1,"row","row-cols-2"],[1,"col"],[1,"vstack","jcc",3,"routerLink"],[1,"m-auto"],[1,"bi",2,"width","2rem","height","2rem"],[1,"deposit"],["type","text","aria-label","\u0411\u0430\u043B\u0430\u043D\u0441 \u0434\u0435\u043F\u043E\u0437\u0438\u0442\u043E\u0432","disabled","","readonly","",1,"form-control",3,"value"],[1,"valid-feedback","d-block","color-accent"],[1,"jcc"],[1,"btn","btn-lg","tg-btn","w-100",3,"routerLink"]],template:function(n,e){n&1&&(t(0,"div",0)(1,"section",1)(2,"article",2)(3,"h5",3)(4,"span",4),c(5,"\u0412 \u0431\u0430\u043D\u043A\u0435"),i(),t(6,"span",5),C("click",function(){return e.bankInfo()}),s(),t(7,"svg",6),r(8,"use"),i()()(),u(),t(9,"div",7)(10,"span",8),s(),t(11,"svg",6),r(12,"use"),i()(),u(),r(13,"input",9),B(14,"async"),i(),t(15,"div",10)(16,"div",11)(17,"a",12)(18,"div",13),s(),t(19,"svg",14),r(20,"use"),i()(),u(),t(21,"div",13),c(22,"\u041F\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u044C"),i()()(),t(23,"div",11)(24,"a",12)(25,"div",13),s(),t(26,"svg",14),r(27,"use"),i()(),u(),t(28,"div",13),c(29,"\u0412\u044B\u0432\u0435\u0441\u0442\u0438"),i()()()()(),r(30,"hr"),t(31,"article",15)(32,"h5",3)(33,"span",4),c(34,"\u041D\u0430 \u0434\u0435\u043F\u043E\u0437\u0438\u0442\u0435"),i(),t(35,"span",5),C("click",function(){return e.depositInfo()}),s(),t(36,"svg",6),r(37,"use"),i()()(),u(),t(38,"div",7)(39,"span",8),s(),t(40,"svg",6),r(41,"use"),i()(),u(),r(42,"input",16),E(43,R,2,1,"div",17),i(),t(44,"div",18)(45,"a",19),c(46,"\u0414\u0435\u043F\u043E\u0437\u0438\u0442\u044B"),i()()()()()),n&2&&(o(8),m("href","#"+e.symbols.infoCircle,null,"xlink"),o(4),m("href","#"+e.symbols.coin,null,"xlink"),o(),w("value",x(14,12,e.bankService.balanceSubject)),o(4),b("routerLink",e.routeCreator.transfer()),o(3),m("href","#"+e.symbols.arrowUp,null,"xlink"),o(4),b("routerLink",e.routeCreator.withdraw()),o(3),m("href","#"+e.symbols.arrowDown,null,"xlink"),o(10),m("href","#"+e.symbols.infoCircle,null,"xlink"),o(4),m("href","#"+e.symbols.clockHistory,null,"xlink"),o(),w("value",e.depositSum),o(),T(e.nearestDeposit?43:-1),o(2),b("routerLink",e.routeCreator.deposit()))},dependencies:[S,L,O],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{content:none}"]})};var V=class l{constructor(a,n){this.twa=a;this.router=n}ngOnInit(){this.twa.backButtonOnClick(()=>this.goBack())}ngOnDestroy(){this.twa.offBackButton(()=>this.goBack())}goBack(){this.router.navigate([D.main()])}symbols=g;static \u0275fac=function(n){return new(n||l)(p(y),p(_))};static \u0275cmp=v({type:l,selectors:[["ng-component"]],hostAttrs:[1,"d-flex","flex-column","h-100"],standalone:!0,features:[f],decls:8,vars:1,consts:[[1,"accent-border","accent-border-top","accent-bg-shadow","rounded-5","tg-bg-secondary","h-100"],[1,"hstack","p-3","pb-0","color-accent"],[1,"m-auto","text-center","h5"],[1,"bi"],[1,"overflow-auto",2,"max-height","calc(var(--tg-viewport-stable-height, 200) * 0.7)"]],template:function(n,e){n&1&&(t(0,"section",0)(1,"div",1)(2,"span",2),s(),t(3,"svg",3),r(4,"use"),i(),c(5," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u043B\u0430\u043D\u0441\u043E\u043C "),i()(),u(),t(6,"div",4),r(7,"balance-main"),i()()),n&2&&(o(4),m("href","#"+e.symbols.currencyExchange,null,"xlink"))},dependencies:[S,k],encapsulation:2})};export{V as BalanceComponent};
