import{Y as s,ba as a,gc as l,hc as n,i,m as c,mc as b}from"./chunk-KV6LOXJG.js";var m=class o{constructor(e,t){this.cloudStorage=e;this.twa=t;this.loadBalance()}balanceSubject=new c(0);_balance=0;get balance(){return this._balance}set balance(e){this._balance=e,this.balanceSubject.next(e)}loadBalance(e){this.cloudStorage.getItem(n).subscribe({next:t=>{this.balance=t?+t:0},error:t=>{if(t)throw new Error(t)},complete:()=>{e&&e(new i(t=>{t.next(),t.complete()}))}})}saveClicks(e){this.saveBalance(this.balance+e)}saveBalance(e,t){if(isNaN(e)||e<0)throw new Error("Wrong coins data");this.cloudStorage.setItem(n,String(e)).subscribe({next:r=>{r&&(this.balance=e)},error:r=>{r&&this.twa.showAlert(r.toString())},complete:()=>{t&&t(new i(r=>r.next()))}})}static \u0275fac=function(t){return new(t||o)(a(b),a(l))};static \u0275prov=s({token:o,factory:o.\u0275fac,providedIn:"root"})};export{m as a};
