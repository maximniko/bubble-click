import{Y as s,ba as i,dc as l,ec as n,i as o,ic as b,m as c}from"./chunk-NGIYV43Q.js";var m=class a{constructor(r,e){this.twa=r;this.cloudStorage=e;this.loadBalance()}balanceSubject=new c(0);_balance=0;get balance(){return this._balance}set balance(r){this._balance=r,this.balanceSubject.next(r)}loadBalance(r){this.cloudStorage.getItem(n).subscribe({next:e=>{if(e){if(isNaN(+e)){this.balance=0;return}this.balance=+e}else this.balance=0},error:e=>{e&&this.twa.showAlert(e)},complete:()=>{r&&(r(new o(e=>e.next())),console.log("balance loaded"))}})}saveBalance(r,e){if(isNaN(r)||r<0)throw new Error("Wrong bank data");this.cloudStorage.setItem(n,String(r)).subscribe({next:t=>{t&&(this.balance=r)},error:t=>{if(t)throw new Error(t)},complete:()=>{e&&(e(new o(t=>t.next())),console.log("Balance saved"))}})}static \u0275fac=function(e){return new(e||a)(i(l),i(b))};static \u0275prov=s({token:a,factory:a.\u0275fac,providedIn:"root"})};export{m as a};
